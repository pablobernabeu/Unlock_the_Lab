import"./modulepreload-polyfill-B5Qt9EMX.js";import{o as f,s as w,a as i,b,d as o}from"./firebase-config-DKpkfjBD.js";import{r as s,a as v,g as r}from"./firebase-4YSElDcj.js";f(i,t=>{t?(E(),m()):h()});window.loginAdmin=async function(t){t.preventDefault();const e=document.getElementById("email").value,l=document.getElementById("password").value,n=document.getElementById("login-error");try{await w(i,e,l),n.style.display="none"}catch(a){n.textContent=`Login failed: ${a.message}`,n.style.display="block"}};window.logoutAdmin=async function(){await b(i)};function h(){document.getElementById("login-section").style.display="block",document.getElementById("admin-panel").style.display="none"}function E(){document.getElementById("login-section").style.display="none",document.getElementById("admin-panel").style.display="block"}async function m(){try{const t=s(o,"active"),e=await r(t),l=e.exists()?Object.keys(e.val()).length:0;document.getElementById("active-count").textContent=l;const n=s(o,"ratings"),a=await r(n);let c=0;if(a.exists()){const y=a.val();Object.values(y).forEach(p=>{c+=Object.keys(p).length})}document.getElementById("total-ratings").textContent=c;const u=s(o,"leaderboard"),d=await r(u),g=d.exists()?Object.keys(d.val()).length:0;document.getElementById("leaderboard-count").textContent=g}catch(t){console.error("Error loading stats:",t)}}window.stopAllSessions=async function(){if(!confirm("Are you sure you want to stop all active sessions? This will force all participants to start new sessions."))return;const t=document.getElementById("action-result");t.innerHTML='<p style="color: #f59e0b;">⏳ Stopping all sessions...</p>';try{const e=s(o,"active");await v(e),t.innerHTML='<p style="color: #10b981; padding: 1rem; background: #d1fae5; border-radius: 4px;">✅ All active sessions have been stopped successfully.</p>',await m()}catch(e){t.innerHTML=`<p style="color: #ef4444; padding: 1rem; background: #fef2f2; border-radius: 4px;">❌ Error: ${e.message}</p>`}};window.auth=i;window.database=o;
